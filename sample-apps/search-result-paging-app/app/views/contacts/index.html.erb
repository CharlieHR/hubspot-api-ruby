<div class="container">
  <% if @error.present? %>
    <h3><%= @error.message %></h3>
  <% else %>
    <%= form_tag('/contacts', method: :get, class: 'contacts') do %>
      <%= text_field_tag(:search, @search_q, placeholder: 'Search by email..', id: 'search') %>
    <% end %>
    <pre>
    <p>Search</p>
    <p># app/lib/services/hubspot/contacts/search.rb</p>
    </pre>

    <% if flash[:notice] %>
      <div class="notice"><%= flash[:notice] %></div>
    <% end %>

    <table class="contacts">
      <thead>
      <tr>
        <th>ID</th>
        <th>Email</th>
        <th>Name</th>
      </tr>
      </thead>
      <tbody>
        <% @contacts.each do |contact| %>
          <tr class="contact">
            <td>
              <div class="contact-info contact-id">
                <%= contact.id %>
              </div>
            </td>
            <td>
              <div class="contact-info contact-email">
                <%= contact.properties['email'] %>
              </div>
            </td>
            <td>
              <div class="contact-info contact-fullname">
                <%= contact.properties['fullname'].present? ? contact.properties['fullname'] : contact.properties['email'] %>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
</div>
